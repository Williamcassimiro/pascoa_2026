<!doctype html>
<html lang="pt-BR" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Card√°pio de P√°scoa</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&amp;family=Nunito:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body { box-sizing: border-box; }
    .font-display { font-family: 'Playfair Display', serif; }
    .font-body { font-family: 'Nunito', sans-serif; }
    @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-10px) rotate(3deg); } }
    @keyframes sparkle { 0%, 100% { opacity: 0.3; transform: scale(0.8); } 50% { opacity: 1; transform: scale(1.2); } }
    .float-animation { animation: float 4s ease-in-out infinite; }
    .sparkle { animation: sparkle 2s ease-in-out infinite; }
    .egg-card { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .egg-card:hover { transform: translateY(-8px) scale(1.02); }
    .egg-card.selected { transform: scale(1.03); }
    .flavor-chip { transition: all 0.3s ease; }
    .gradient-border { background: linear-gradient(135deg, #d4a574, #8b5a2b, #d4a574); background-size: 200% 200%; animation: gradient-shift 3s ease infinite; }
    @keyframes gradient-shift { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }
    .step-indicator { transition: all 0.5s ease; }
    .step-indicator.completed { background: linear-gradient(135deg, #4ade80, #22c55e) !important; color: white !important; }
    .price-badge {
      background: linear-gradient(135deg, #8b5a2b, #5c3d2e);
      color: white;
      padding: 4px 12px;
      border-radius: 999px;
      font-weight: bold;
      font-size: 0.875rem;
      box-shadow: 0 4px 10px rgba(139, 90, 43, 0.2);
    }
        /* BOT√ÉO FLUTUANTE DE D√öVIDA */
    .btn-duvida {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #ffffff;
      color: #5c3d2e;
      border: 2px solid #d4a574;
      padding: 10px 18px;
      border-radius: 50px;
      display: flex;
      items: center;
      gap: 8px;
      font-weight: bold;
      font-size: 14px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      z-index: 100;
      transition: all 0.3s ease;
    }
    .btn-duvida:hover { transform: scale(1.05); background: #fef7ed; }
  </style>
 </head>
 <body class="h-full font-body overflow-auto" style="margin: 0;">

    
  <button onclick="duvidaWhatsApp()" class="btn-duvida">
    <span>ü§î D√∫vidas?</span>
  </button>
  <div id="app-wrapper" class="min-h-full w-full" style="background: linear-gradient(180deg, #fef7ed 0%, #fdf2e3 50%, #fcead4 100%);">
   
   <div class="fixed inset-0 pointer-events-none overflow-hidden">
    <div class="absolute top-10 left-10 text-4xl sparkle" style="animation-delay: 0s;">‚ú®</div>
    <div class="absolute top-20 right-20 text-3xl sparkle" style="animation-delay: 0.5s;">üê∞</div>
    <div class="absolute bottom-40 left-20 text-3xl sparkle" style="animation-delay: 1s;">üå∏</div>
    <div class="absolute bottom-20 right-10 text-4xl sparkle" style="animation-delay: 1.5s;">‚ú®</div>
   </div>

   <div class="relative max-w-4xl mx-auto px-4 py-8">
    
    <header class="text-center mb-10">
     <div class="inline-block mb-4"><div class="text-6xl float-animation">ü•ö</div></div>
     <h1 id="page-title" class="font-display text-4xl md:text-5xl font-bold mb-3" style="color: #5c3d2e;">P√°scoa 2026</h1>
     <p class="text-lg" style="color: #8b6914;">Ovos artesanais feitos com amor</p>
     
     <div class="flex justify-center items-center gap-4 mt-8">
      <div id="step1-indicator" class="step-indicator active w-10 h-10 rounded-full flex items-center justify-center text-white font-bold shadow-lg" style="background: linear-gradient(135deg, #d4a574, #8b5a2b);">1</div>
      <div class="w-12 h-1 rounded" style="background: #e8d5c4;"></div>
      <div id="step2-indicator" class="step-indicator w-10 h-10 rounded-full flex items-center justify-center font-bold shadow-lg" style="background: #e8d5c4; color: #8b5a2b;">2</div>
      <div class="w-12 h-1 rounded" style="background: #e8d5c4;"></div>
      <div id="step3-indicator" class="step-indicator w-10 h-10 rounded-full flex items-center justify-center font-bold shadow-lg" style="background: #e8d5c4; color: #8b5a2b;">‚úì</div>
     </div>
    </header>

    <section id="carousel-section" class="mb-10">
        <div class="relative rounded-3xl overflow-hidden shadow-2xl" style="height: 400px; background: linear-gradient(135deg, #d4a574, #8b5a2b);">
          <div class="relative w-full h-full flex items-center justify-center">
          <div id="carousel-track" class="flex transition-transform duration-500 ease-out w-full h-full">
            <div class="carousel-slide w-full h-full flex-shrink-0 flex items-center justify-center relative">
            <img src="./assets/img/mini_ovos.jpeg">
            </div>
            <div class="carousel-slide w-full h-full flex-shrink-0 flex items-center justify-center relative">
            <img src="https://www.mifascinodoceria.com.br/wp-content/uploads/2024/03/MG_3788-scaled.jpg" class="w-full h-full object-cover">
            </div>
            <div class="carousel-slide w-full h-full flex-shrink-0 flex items-center justify-center relative">
            <img src="./assets/img/ovos_350.jpeg">
            </div>
            <div class="carousel-slide w-full h-full flex-shrink-0 flex items-center justify-center relative">
            <img src="https://chocolatesbomsabor.com.br/wp-content/uploads/2022/02/IMG_4192.png" class="w-full h-full object-cover">
            </div>
            <div class="carousel-slide w-full h-full flex-shrink-0 flex items-center justify-center relative">
            <img src="https://p2.trrsf.com/image/fget/cf/774/0/images.terra.com/2025/03/29/1095338354-ovo-trufado-de-maracuja.jpg" class="w-full h-full object-cover">
            </div>>
          </div>
          <button onclick="moveCarousel(-1)" class="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full text-white z-10" style="background: rgba(139, 90, 43, 0.7);">‚ùÆ</button>
          <button onclick="moveCarousel(1)" class="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full text-white z-10" style="background: rgba(139, 90, 43, 0.7);">‚ùØ</button>
          </div>
        </div>
     </section>

    <section id="step1" class="mb-10">
     <div class="flex items-center gap-3 mb-6"><span class="text-2xl">ü•ö</span><h2 class="font-display text-2xl font-semibold" style="color: #5c3d2e;">Etapa 1 ‚Äî Escolha o Tipo de Ovo</h2></div>
     <div class="grid md:grid-cols-3 gap-6">
      <div class="egg-card cursor-pointer rounded-3xl p-1 gradient-border" data-egg-type="trio" onclick="selectEggType('trio')">
       <div class="rounded-3xl p-6 h-full" style="background: #fffcf7;">
        <div class="flex items-start justify-between mb-4">
         <div class="text-4xl">üéÅ</div>
         <div id="trio-check" class="w-7 h-7 rounded-full border-2 flex items-center justify-center" style="border-color: #d4a574;"><svg class="w-4 h-4 hidden" fill="none" stroke="currentColor" viewbox="0 0 24 24" style="color: #8b5a2b;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></div>
        </div>
        <h3 class="font-display text-lg font-semibold mb-2" style="color: #5c3d2e;">Trio Mini Ovos</h3>
        <p class="text-sm mb-3" style="color: #8b6914;">150g no total (3 unidades de 50g)</p>
        <p class="text-sm mb-3" style="color: #8b6914;">R$ 25.00</p>
       </div>
      </div>
      <div class="egg-card cursor-pointer rounded-3xl p-1 gradient-border" data-egg-type="trufado" onclick="selectEggType('trufado')">
       <div class="rounded-3xl p-6 h-full" style="background: #fffcf7;">
        <div class="flex items-start justify-between mb-4">
         <div class="text-4xl">üç´</div>
         <div id="trufado-check" class="w-7 h-7 rounded-full border-2 flex items-center justify-center" style="border-color: #d4a574;"><svg class="w-4 h-4 hidden" fill="none" stroke="currentColor" viewbox="0 0 24 24" style="color: #8b5a2b;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></div>
        </div>
        <h3 class="font-display text-lg font-semibold mb-2" style="color: #5c3d2e;">Ovo Trufado Meia Casca</h3>
        <p class="text-sm mb-3" style="color: #8b6914;">Selecione a op√ß√£o para ver os valores</p>
        <div id="size-options-meia" class="hidden space-y-2 mt-2">
         <p class="text-xs font-semibold mb-2" style="color: #8b5a2b;">Escolha o tamanho:</p>
         <label class="flex items-center gap-2 text-sm"><input type="radio" name="size" value="250g"> 250g</label>
         <label class="flex items-center gap-2 text-sm"><input type="radio" name="size" value="350g"> 350g</label>
        </div>
       </div>
      </div>
      <div class="egg-card cursor-pointer rounded-3xl p-1 gradient-border" data-egg-type="inteiro" onclick="selectEggType('inteiro')">
       <div class="rounded-3xl p-6 h-full" style="background: #fffcf7;">
        <div class="flex items-start justify-between mb-4">
         <div class="text-4xl">‚ú®</div>
         <div id="inteiro-check" class="w-7 h-7 rounded-full border-2 flex items-center justify-center" style="border-color: #d4a574;"><svg class="w-4 h-4 hidden" fill="none" stroke="currentColor" viewbox="0 0 24 24" style="color: #8b5a2b;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></div>
        </div>
        <h3 class="font-display text-lg font-semibold mb-2" style="color: #5c3d2e;">Ovo Trufado Inteiro</h3>
        <p class="text-sm mb-3" style="color: #8b6914;">Selecione a op√ß√£o para ver os valores</p>
        <div id="size-options-inteiro" class="hidden space-y-2 mt-2">
         <p class="text-xs font-semibold mb-2" style="color: #8b5a2b;">Escolha o tamanho:</p>
         <label class="flex items-center gap-2 text-sm"><input type="radio" name="size" value="250g + 250g (500g)"> 500g (Duas Cascas)</label>
         <label class="flex items-center gap-2 text-sm"><input type="radio" name="size" value="350g + 350g (700g)"> 700g (Duas Cascas)</label>
        </div>
       </div>
      </div>
     </div>
    </section>
    <div id="price-table" class="mb-10 hidden overflow-hidden rounded-2xl border border-[#d4a574]/30 bg-white/50 shadow-sm">
        <table class="w-full text-left text-sm">
            <thead class="bg-[#fef7ed] text-[#5c3d2e]"><tr><th class="p-3 font-semibold">Tamanho (Individual)</th><th class="p-3 font-semibold">Tradicional</th><th class="p-3 font-semibold">Fruta</th><th class="p-3 font-semibold">Especial</th></tr></thead>
            <tbody id="price-rows" class="divide-y divide-[#d4a574]/10 text-[#8b6914]"></tbody>
        </table>
    </div>

    <section id="step2" class="mb-10 opacity-50 pointer-events-none transition-all duration-500">
     <div class="flex items-center gap-3 mb-6"><span class="text-2xl">üß©</span><h2 class="font-display text-2xl font-semibold" style="color: #5c3d2e;">Etapa 2 ‚Äî Escolha os Sabores</h2></div>
     <p id="flavor-instruction" class="text-sm mb-6 p-4 rounded-2xl" style="background: #fff8ed; color: #8b6914; border: 1px dashed #d4a574;">üìå Selecione os sabores</p>
     <div class="space-y-6">
        <div>
          <h3 class="font-semibold mb-3 text-[#1e40af]">üç´ CATEGORIA TRADICIONAL</h3>
          <div class="flex flex-wrap gap-2">
            <button class="flavor-chip px-4 py-2 rounded-xl bg-white shadow-sm border text-sm" data-flavor="Brigadeiro" data-category="tradicional" onclick="toggleFlavor(this)">üç´ Brigadeiro</button>
            <button class="flavor-chip px-4 py-2 rounded-xl bg-white shadow-sm border text-sm" data-flavor="Beijinho" data-category="tradicional" onclick="toggleFlavor(this)">ü•• Beijinho</button>
            <button class="flavor-chip px-4 py-2 rounded-xl bg-white shadow-sm border text-sm" data-flavor="Dois Amores" data-category="tradicional" onclick="toggleFlavor(this)">üíï Dois Amores</button>
          </div>
        </div>
        <div>
          <div class="flex items-center gap-2 mb-4"><span class="text-xl">üçì</span><h3 class="font-semibold" style="color: #e879a9;">CATEGORIA FRUTA</h3></div>
          <div class="flex flex-wrap gap-2">
            <button class="flavor-chip px-4 py-2 rounded-xl bg-white shadow-sm border text-sm" data-flavor="Ninho com Morango" data-category="fruta" onclick="toggleFlavor(this)">üçì Ninho com Morango</button>
            <button class="flavor-chip px-4 py-2 rounded-xl bg-white shadow-sm border text-sm" data-flavor="Maracuj√° Cremoso" data-category="fruta" onclick="toggleFlavor(this)">üçã Maracuj√° Cremoso</button>
          </div>
        </div>
        <div>
          <div class="flex items-center gap-2 mb-4"><span class="text-xl">‚ú®</span><h3 class="font-semibold" style="color: #d97706;">CATEGORIA ESPECIAL</h3></div>
          <div class="flex flex-wrap gap-2">
            <button class="flavor-chip px-4 py-2 rounded-xl bg-white shadow-sm border text-sm" data-flavor="Ouro Branco" data-category="especial" onclick="toggleFlavor(this)">üç¨ Ouro Branco</button>
            <button class="flavor-chip px-4 py-2 rounded-xl bg-white shadow-sm border text-sm" data-flavor="Kinder" data-category="especial" onclick="toggleFlavor(this)">üç´ Kinder</button>
            <button class="flavor-chip px-4 py-2 rounded-xl bg-white shadow-sm border text-sm" data-flavor="Ninho com Nutella" data-category="especial" onclick="toggleFlavor(this)">ü•õüç´ Ninho com Nutella</button>
            <button class="flavor-chip px-4 py-2 rounded-xl bg-white shadow-sm border text-sm" data-flavor="Oreo" data-category="especial" onclick="toggleFlavor(this)">üç™ Oreo</button>
            <button class="flavor-chip px-4 py-2 rounded-xl bg-white shadow-sm border text-sm" data-flavor="Crocante de Amendoim" data-category="especial" onclick="toggleFlavor(this)">üçØ Crocante de Amendoim </button>
          </div>
        </div>
     </div>
    </section>
    <section class="mb-8">
        <div class="rounded-3xl p-6" style="background: linear-gradient(135deg, #fef7ed, #fff8ed); border: 2px dashed #d4a574;">
          <div class="flex items-center gap-3 mb-4">
          <span class="text-2xl">üì¶</span>
          <h2 class="font-display text-xl font-semibold" style="color: #5c3d2e;">Informa√ß√µes Importantes</h2>
          </div>
          <div class="space-y-3">
          <div class="flex items-start gap-3">
            <span class="text-xl">üóì</span>
            <p style="color: #5c3d2e;"><span class="font-semibold">Pedidos aceitos</span> <span id="deadline-display">at√© 29/03</span></p>
          </div>
          <div class="flex items-start gap-3">
            <span class="text-xl">üöö</span>
            <p style="color: #5c3d2e;"><span class="font-semibold">Entregas</span> iniciam 1 semana antes da P√°scoa</p>
          </div>
          <div class="flex items-start gap-3">
            <span class="text-xl">‚ö†Ô∏è</span>
            <p style="color: #5c3d2e;"><span class="font-semibold">Produ√ß√£o limitada</span> ‚Äì sob encomenda</p>
          </div>
          <div class="flex items-start gap-3">
            <span class="text-xl">üç´</span>
            <p style="color: #5c3d2e;"><span class="font-semibold">Composi√ß√£o dos sabores:</span><br>
            ‚Ä¢ Oreo √© produzidos com <strong>chocolate branco</strong><br>
            ‚Ä¢ Crocante de Amendoim cont√©m <strong>amendoim na casquinha</strong></p>
          </div>
          <div class="flex items-start gap-3">
            <span class="text-xl">‚ÑπÔ∏è</span>
            <p style="color: #5c3d2e;">Para realizar um <strong>novo pedido ou altera√ß√µes</strong>, solicitamos que o envio seja feito novamente pelo site. Assim, conseguimos garantir um atendimento mais organizado e eficiente.</p>
          </div>
          </div>
        </div>
    </section>


    <section id="order-summary" class="mb-10 opacity-50 pointer-events-none">
     <div class="rounded-3xl p-1 gradient-border">
      <div class="rounded-3xl p-6 bg-white">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center gap-3"><span class="text-2xl">üìã</span><h2 class="font-display text-xl font-semibold" style="color: #5c3d2e;">Resumo do Pedido</h2></div>
          <div id="total-price-display" class="price-badge hidden">R$ 0,00</div>
        </div>
       <div id="summary-content" class="space-y-3 mb-6"></div>
       <div id="customer-info" class="space-y-4 mb-6">
        <input type="text" id="customer-name" placeholder="Seu Nome *" class="w-full p-3 rounded-xl border border-[#d4a574]">
        <input type="text" id="customer-city" placeholder="Sua Cidade *" class="w-full p-3 rounded-xl border border-[#d4a574]">
       </div>
       <button onclick="sendToWhatsApp()" class="w-full py-4 rounded-2xl font-bold text-white shadow-xl flex items-center justify-center gap-3" style="background: linear-gradient(135deg, #25d366, #128c7e);">Enviar Pedido pelo WhatsApp</button>

      
      </div>
     </div>
    </section>
    <p class="text-center mt-4 text-xs text-gray-500">
         Ficou com alguma d√∫vida? 
         <a href="javascript:void(0)" onclick="duvidaWhatsApp()" class="text-amber-700 font-bold underline">Fale conosco</a>
    </p>
    <footer class="text-center py-6"><p class="text-sm" style="color: #8b6914;">Feito com ‚ù§Ô∏è para uma P√°scoa especial</p></footer>
   </div>
  </div>

  <script>

    const TABELA_PRECOS = {
        trio: { "150g": { fixo: 25.00 } },
        trufado: {
            "250g": { tradicional: 55.00, fruta: 55.00, especial: 65.00 },
            "350g": { tradicional: 75.00, fruta: 75.00, especial: 85.00 }
        },
        inteiro_INFO: {
            "250g + 250g (500g)": { tradicional: 110.00, fruta: 110.00, especial: 130.00 },
            "350g + 350g (700g)": { tradicional: 150.00, fruta: 150.00, especial: 170.00 }
        },
        inteiro: {
            "250g + 250g (500g)": { tradicional: 55.00, fruta: 55.00, especial: 65.00 },
            "350g + 350g (700g)": { tradicional: 75.00, fruta: 75.00, especial: 85.00 }
        },
    };

    let selectedEggType = null;
    let selectedSize = null;
    let selectedFlavors = [];
    let maxFlavors = 1;

        // --- FUN√á√ÉO PARA D√öVIDAS ---
    function duvidaWhatsApp() {
      const msg = encodeURIComponent("Ol√°! Estou no site e tenho uma d√∫vida sobre os ovos de P√°scoa.");
      window.open(`https://wa.me/554599900411?text=${msg}`);
    }

    function moveCarousel(direction) {
      const slides = document.querySelectorAll('.carousel-slide').length;
      let track = document.getElementById('carousel-track');
      let current = parseInt(track.dataset.current || 0);
      current = (current + direction + slides) % slides;
      track.style.transform = `translateX(-${current * 100}%)`;
      track.dataset.current = current;
    }

    function selectEggType(type) {
      selectedEggType = type;
      selectedFlavors = [];
      selectedSize = null;
      document.querySelectorAll('.egg-card').forEach(card => {
        card.classList.remove('selected');
        card.querySelector('svg').classList.add('hidden');
        card.querySelector('[id$="-check"]').style.background = 'transparent';
      });
      const selectedCard = document.querySelector(`[data-egg-type="${type}"]`);
      selectedCard.classList.add('selected');
      selectedCard.querySelector('svg').classList.remove('hidden');
      selectedCard.querySelector('[id$="-check"]').style.background = '#d4a574';
      document.getElementById('size-options-meia').classList.add('hidden');
      document.getElementById('size-options-inteiro').classList.add('hidden');
      /*document.querySelectorAll('input[name="size"]').forEach(r => r.checked = false);*/
      document.querySelectorAll('.flavor-chip').forEach(c => c.classList.remove('selected', 'bg-[#8b5a2b]', 'text-white'));

      if (type === 'trio') {
        maxFlavors = 3;
        selectedSize = "150g";
        document.getElementById('flavor-instruction').innerHTML = 'üìå Escolha <strong>exatamente 3 sabores</strong>';
        document.getElementById('price-table').classList.add('hidden');
      } else {
        const targetDiv = type === 'trufado' ? 'size-options-meia' : 'size-options-inteiro';
        document.getElementById(targetDiv).classList.remove('hidden');
        maxFlavors = type === 'trufado' ? 1 : 2;
        document.getElementById('flavor-instruction').innerHTML = `üìå Escolha <strong>${maxFlavors} sabor(es)</strong>`;
        renderPriceTable(type);
      }
      document.getElementById('step2').classList.remove('opacity-50', 'pointer-events-none');
      document.getElementById('step1-indicator').classList.add('completed');
      updateSummary();
    }

   /* function renderPriceTable(type) {
        const table = document.getElementById('price-table');
        const rows = document.getElementById('price-rows');
        table.classList.remove('hidden');
        rows.innerHTML = "";
        if (type === 'inteiro') {
          type = 'inteiro_INFO'
          const mensagemImportante = `
            <tr>
              <td colspan="4" style="padding: 16px;">
                <div class="p-3 rounded-xl text-sm" style="background: #fef7ed; color: #5c3d2e;">
                  üí∞ <strong>Importante:</strong> O valor da lista considera dois sabores da mesma categoria.
                  Caso selecione categorias diferentes, o sistema somar√° os valores individualmente
                  conforme a tabela do <strong>Ovo Trufado Meia Casca</strong>.
                </div>
              </td>
            </tr>
          `;
        }   
        Object.entries(TABELA_PRECOS[type]).forEach(([size, values]) => {
            rows.innerHTML += `<tr><td class="p-3 font-bold">${size}</td><td class="p-3">R$ ${values.tradicional.toFixed(2)}</td><td class="p-3">R$ ${values.fruta.toFixed(2)}</td><td class="p-3">R$ ${values.especial.toFixed(2)}</td></tr>`;
        });
    }*/
    function renderPriceTable(type) {
        const table = document.getElementById('price-table');
        const rows = document.getElementById('price-rows');

        table.classList.remove('hidden');
        rows.innerHTML = "";

        const isInteiro = type === 'inteiro';

        if (isInteiro) {
            type = 'inteiro_INFO';
        }

        // üîπ Monta a tabela primeiro
        Object.entries(TABELA_PRECOS[type]).forEach(([size, values]) => {
            rows.innerHTML += `
                <tr>
                    <td class="p-3 font-bold">${size}</td>
                    <td class="p-3">R$ ${values.tradicional.toFixed(2)}</td>
                    <td class="p-3">R$ ${values.fruta.toFixed(2)}</td>
                    <td class="p-3">R$ ${values.especial.toFixed(2)}</td>
                </tr>
            `;
        });

        // üîπ Depois adiciona a mensagem no final
        if (isInteiro) {
            rows.innerHTML += `
                <tr>
                    <td colspan="4" style="padding: 16px;">
                        <div class="p-3 rounded-xl text-sm mt-2" style="background: #fef7ed; color: #5c3d2e;">
                            üí∞ <strong>Importante:</strong> O valor da lista considera dois sabores da mesma categoria.
                            Caso selecione categorias diferentes, o sistema somar√° os valores individualmente
                            conforme a tabela do <strong>Ovo Trufado Meia Casca</strong>.
                        </div>
                    </td>
                </tr>
            `;
        }
    }

    document.querySelectorAll('input[name="size"]').forEach(radio => {
      radio.addEventListener('change', (e) => {
        selectedSize = e.target.value;
        updateSummary();
      });
    });

function toggleFlavor(chip) {
      const flavor = chip.dataset.flavor;
      const category = chip.dataset.category;
      const idx = selectedFlavors.findIndex(f => f.name === flavor);
      
      if (maxFlavors === 1) {
        // L√≥gica para Ovo Trufado Meia Casca (1 sabor)
        selectedFlavors = [{ name: flavor, category: category }];
        document.querySelectorAll('.flavor-chip').forEach(c => c.classList.remove('selected', 'bg-[#8b5a2b]', 'text-white'));
        chip.classList.add('selected', 'bg-[#8b5a2b]', 'text-white');
      } else {
        // L√≥gica para Ovo Inteiro (2 sabores) ou Trio (3 sabores)
        if (idx > -1) {
          // Se j√° estava selecionado, desmarca
          selectedFlavors.splice(idx, 1);
          chip.classList.remove('selected', 'bg-[#8b5a2b]', 'text-white');
        } else {
          // Se atingiu o limite, remove o primeiro para dar lugar ao novo (Troca inteligente)
          if (selectedFlavors.length >= maxFlavors) {
            const removido = selectedFlavors.shift(); // Remove o primeiro do array
            // Remove o visual do bot√£o que foi retirado
            document.querySelectorAll('.flavor-chip').forEach(c => {
              if (c.dataset.flavor === removido.name) {
                c.classList.remove('selected', 'bg-[#8b5a2b]', 'text-white');
              }
            });
          }
          
          // Adiciona o novo sabor
          selectedFlavors.push({ name: flavor, category: category });
          chip.classList.add('selected', 'bg-[#8b5a2b]', 'text-white');
        }
      }
      updateSummary();
    }

    function calculatePrice() {
        if (!selectedEggType || !selectedSize || selectedFlavors.length === 0) return 0;
        if (selectedEggType === 'trio') return TABELA_PRECOS.trio["150g"].fixo;

        let dominantCategory = "tradicional";
        /*selectedFlavors.forEach(f => {
            if (f.category === "especial") dominantCategory = "especial";
            else if (f.category === "fruta" && dominantCategory !== "especial") dominantCategory = "fruta";
        });

        return TABELA_PRECOS[selectedEggType][selectedSize][dominantCategory];*/
        let total = 0;

        selectedFlavors.forEach(flavor => {
            const category = flavor.category || "tradicional";
            const price = TABELA_PRECOS[selectedEggType][selectedSize][category];

            if (price) {
                total += price;
            }
        });

        return total;
    }

    function updateSummary() {
      const summaryContent = document.getElementById('summary-content');
      const priceBadge = document.getElementById('total-price-display');
      const currentPrice = calculatePrice();
      
      let isComplete = (selectedEggType === 'trio' && selectedFlavors.length === 3) || 
                       (selectedEggType === 'trufado' && selectedSize && selectedFlavors.length === 1) || 
                       (selectedEggType === 'inteiro' && selectedSize && selectedFlavors.length === 2);

      if (selectedEggType) {
        let flavorsHtml = selectedFlavors.length > 0 
          ? `<div class="p-3 rounded-xl bg-[#fef7ed]"><p class="text-sm font-semibold mb-2">Sabores:</p><div class="flex flex-wrap gap-2">${selectedFlavors.map(f => `<span class="px-2 py-1 bg-[#8b5a2b] text-white text-[10px] rounded-lg">${f.name}</span>`).join('')}</div></div>` 
          : "";

       /* summaryContent.innerHTML = `
          <div class="p-3 rounded-xl bg-[#fef7ed]">
            <p class="font-bold text-[#5c3d2e]">${selectedEggType === 'inteiro' ? 'Ovo Trufado Inteiro (2 Cascas)' : selectedEggType.toUpperCase()}</p>
            <p class="text-sm text-[#8b6914]">Tamanho: ${selectedSize || '...'}</p>
          </div>
          ${flavorsHtml}`; -- aqui
        */
          let eggSummaryHTML = '';

          if (selectedEggType === 'trio') {
            eggSummaryHTML = `
              <div class="flex items-center gap-3 p-3 rounded-xl" style="background:#fef7ed;">
                <span class="text-2xl">üéÅ</span>
                <div>
                  <p class="font-semibold text-[#5c3d2e]">Trio de Mini Ovos de Colher</p>
                  <p class="text-sm text-[#8b6914]">150g (3 √ó 50g)</p>
                </div>
              </div>
            `;
          }

          if (selectedEggType === 'trufado') {
            eggSummaryHTML = `
              <div class="flex items-center gap-3 p-3 rounded-xl" style="background:#fef7ed;">
                <span class="text-2xl">üç´</span>
                <div>
                  <p class="font-semibold text-[#5c3d2e]">Ovo Trufado Meia Casca</p>
                  <p class="text-sm text-[#8b6914]">${selectedSize || 'Selecione o tamanho'}</p>
                </div>
              </div>
            `;
          }

          if (selectedEggType === 'inteiro') {
            eggSummaryHTML = `
              <div class="flex items-center gap-3 p-3 rounded-xl" style="background:#fef7ed;">
                <span class="text-2xl">ü•ö</span>
                <div>
                  <p class="font-semibold text-[#5c3d2e]">Ovo Trufado Inteiro Duas Cascas</p>
                  <p class="text-sm text-[#8b6914]">${selectedSize || 'Selecione o tamanho'}</p>
                </div>
              </div>
            `;
          }

          summaryContent.innerHTML = `
            ${eggSummaryHTML}
            ${flavorsHtml}
          `;
       

        
        if (currentPrice > 0) { 
          priceBadge.innerHTML = `R$ ${currentPrice.toFixed(2)}`; 
          priceBadge.classList.remove('hidden'); 
        } else { 
          priceBadge.classList.add('hidden'); 
        }

        if (isComplete) { 
          document.getElementById('order-summary').classList.remove('opacity-50', 'pointer-events-none'); 
          document.getElementById('step3-indicator').classList.add('active', 'completed'); 
        } else { 
          document.getElementById('order-summary').classList.add('opacity-50', 'pointer-events-none'); 
          document.getElementById('step3-indicator').classList.remove('active', 'completed'); 
        }
      }
    }

    /*function sendToWhatsApp() {
      const n = document.getElementById('customer-name').value;
      const c = document.getElementById('customer-city').value;
      if(!n || !c || selectedFlavors.length < maxFlavors) return alert("Preencha todos os campos!");
      const finalPrice = calculatePrice();
      const msg = `Ol√°! Pedido de P√°scoa üê∞\n*Cliente:* ${n}\n*Cidade:* ${c}\n*Produto:* ${selectedEggType}\n*Peso:* ${selectedSize}\n*Sabores:* ${selectedFlavors.map(f => f.name).join(' e ')}\n*TOTAL:* R$ ${finalPrice.toFixed(2)}`;
      
      window.open(`https://wa.me/554599900411?text=${encodeURIComponent(msg)}`);
    }*/

    function sendToWhatsApp() {
      const name = document.getElementById('customer-name').value;
      const city = document.getElementById('customer-city').value;
      
      if(!name || !city || selectedFlavors.length < maxFlavors) return alert("Preencha todos os campos e selecione sabores diferentes para continuar ou mesmo sabor!");
      if (selectedFlavors.length === 0) return alert('Escolha um sabor');
      if (selectedEggType === 'trio' && selectedFlavors.length !== 3) return alert('Trio precisa de 3 sabores');
      if (selectedEggType === 'trufado' && !selectedSize) return alert('Escolha o tamanho');
      if (selectedEggType === 'inteiro' && !selectedSize)return alert('Escolha o tamanho');
      const finalPrice = calculatePrice();
      const orderNumber = 'PAS' + Date.now().toString().slice(-6);

      const orderDate= '*Data do pedido:* ' + new Date().toLocaleDateString('pt-BR') + '\n';
      const statusOrden = '*Status:* Aguardando confirma√ß√£o.';

      const msg = `Ol√°! Gostaria de fazer um pedido de P√°scoa.\n\n*OVO DE P√ÅSCOA ‚Äì NOVO PEDIDO*\n\n*Pedido n¬∫:* ${orderNumber}\n*Cliente:* ${name}\n*Cidade:* ${city}\n*Produto:* ${selectedEggType}\n*Peso:* ${selectedSize|| '150g (3 √ó 50g)'}\n*Sabores:*  ${selectedFlavors.map(f => f.name).join(' e ')}\n\n*TOTAL:* R$ ${finalPrice.toFixed(2)}\n\n${orderDate}${statusOrden}
      `;
      


      window.open(`https://wa.me/554599900411?text=${encodeURIComponent(msg)}`);
    }
  </script>
 </body>
</html>
